# 版本发布 

## 20250116 (v1.3.9)
::: warning
  重要修改: v1.3.9 新增了超时访问时长控制，之前没有限制，无限等待，可能存在尝试占用不释放资源的问题，新版本默认是60秒，如果修改成0则是不限制，请依据情况进行修改
:::
- 提升稳定性
- 新增支持同时绑定多个域名
![绑定多个域名](/images/bind_more_domain.png) 
- 新增防护主机可以按照创建时间排序
- 新增日志可进行脱敏拷贝
- 新增支持SSL免费证书自动申请，到期提前自动延期
[自动申请SSL操作手册](https://doc.samwaf.com/guide/SSLOrder.html) 
- 新增SSL证书批量检测
[SSL证书批量检测](https://doc.samwaf.com/guide/SslExpire.html) 
- 新增支持网站帐号密码访问
![网站帐号密码访问](/images/password_visit.png) 
- 新增支持超时配置
![超时配置](/images/response_timeout.png)  
- 新增内部任务管理界面
- 修正网站导入、导出功能
![网站导入](/images/import_host.png)
- 优化Docker发布策略正式版本latest,最新测试版本单独发标签

## 20241204 (v1.3.8)
- 提升稳定性 
- 新增首页IP排名显示

![首页IP排名显示](/images/iprank.png) 

- 新增CC防御锁定时间

![CC防御锁定时间](/images/cclocktime.png) 

![CC解除IP限制](/images/ccunlock.png) 

- 新增被防护网站支持泛域名
- 新增后端IP支持域名，以解决DDNS公网IP经常变动问题
- 新增隐藏SamWaf标识
- 新增支持Linux Arm64架构/Docker Arm64架构
- 新增批量从文件、远端URL导入到IP白名单内
- 新增owasp 规则集
```
系统设置 ->参数设置 新增1个配置： 
enable_owasp 启动OWASP数据检测（1启动 0关闭）
```
- 新增实时查看网站QPS/实时连接
- 新增支持IPv6国家维度得识别 
- 修正ip识别国家为0的问题
- 修正URL多语言问题
- 修正无法正常删除新增管理帐号
- 修正白名单IP，白名单URL逻辑问题
- 修正前端搜索布局显示问题
- 优化PHP URL解码功能

## 20241105 (v1.3.7)
- 提升稳定性
- 新增登录密码错误限制并记录日志。
```
系统设置 ->参数设置 新增1个配置： 
login_max_error_time   登录周期里错误最大次数 默认3
login_limit_mintutes   登录错误记录周期 单位分钟数，默认1分钟
```
- 新增WebLog访问记录可传送到kafka
```
系统设置 ->参数设置 新增3个配置：
kafka_enable 是否激活传送kafka( 0 不激活; 1 激活状态 ) 
kafka_url   kafka url地址
kafka_topic   kafka 主题  
```
- 新增Windows2008r2进行专版发布
```
SamWaf64ForWin7Win8Win2008.exe
```

- 新增日志库索引,提升日志查看速度
- 新增管理端默认robots.txt屏蔽爬虫
- 修正Docker设置时区不生效问题
- 修正查看日志时相同域名不同端口无法区分问题
- 新增80默认强制跳转443功能

![80强制跳转443](/images/jumphttps.png)

```

系统设置 ->参数设置 新增1个配置： 
redirect_https_code  默认跳转HTTP CODE代码为:301。
```
- 修正后端是https的情况无法正常访问的问题
- 优化SSL证书加载机制
- 优化SSL证书夹证书文件和密钥文件位置自定义
- 修正网站修改或者删除完后没有停留再当前页面的问题
- 修正网站启动状态如果关闭情况还能访问的问题


## 20241011 (v1.3.6)
- 新增定义IP数据库 
[https://gitee.com/samwaf/SamWaf/blob/main/docs/ipmodify.md](https://gitee.com/samwaf/SamWaf/blob/main/docs/ipmodify.md)
- 新增SSL证书夹并可以自动加载最新证书信息

![证书加载位置](/images/sslconfig_auto.png)

- 添加docker脚本新增ssl文件夹目录映射 
- 修正数据分析背景颜色问题
- 修正数据分析全选问题
- 修正攻击日志里面页面大小丢失的问题

## 20241008 (v1.3.5)
- 修正如果上游是CDN或者NGINX无法正常访问的问题
主机编辑里面可依据情况 开启或者关闭 来源严格端口

## 20241006 (v1.3.4)
- 1.增加负载均衡

![负载均衡列表](/images/loadbalanceindex.png)。

- 2.运行支持windows 2008r2环境
## 20240925 (v1.3.3)
- 1.当服务形式安装、启动、停止、卸载后操作后回写反馈信息.
- 2.当SamWaf启动完毕显示管理端地址.
- 3.自定义获取上游Proxy Ip
- 4.修正点击页面关闭逻辑问题
- 5:进行Upx压缩减少文件大小

## 20240920 (v1.3.2)
- 1.修正几处多语言问题
- 2.适配流水线编译
- 3.增加拦截敏感词

![敏感词](/images/Sensitive.png)

- 4.增加日志导出sqlite db文件

 ![增加日志导出](/images/export_log_db.png)
 
- 5.正式开源

## 20240903(v1.3.1)
- 1.增加多语言环境
- 2.增加docker环境
```
https://hub.docker.com/r/samwaf/samwaf
```
- 3.重构如果上游服务端失败也正常反馈出来
- 4.修正如果写入失败情况异常的问题
- 5.命令行新增管理员重置密码功能
```
如登录密码丢失可以使用命令行形式重置；

SamWaf64.exe resetpwd

SamWafLinux64 resetpwd
```
- 6.修正被拒情况没有返回403的问题
- 7.修正当仅需要ssl情况下必须要重启才生效的问题
- 8.修正检测内部修改weblog无效的问题
- 
##  20240729(v1.2.2) 
- 修正Thinkphp下提示"此表单不安全,因此,系统已关闭自动填充功能"的问题
  
##  20240712(v1.2.1) 
- 修正重要安全问题
- 新增集中管理

##  20240705(v1.1.10) 
- 主机增加配置排除某些url记录日志的功能	 
- 修正添加主机时候校验返回错误内容问题
- 添加主机时候，按钮距离太近的问题
  
##  20240704(v1.1.9) 
- 提升程序稳定性
- 优化操作流程
- 修正主机导出导入异常问题
  
##  20240703(v1.1.8) 
- 新增一键修改宝塔安装的Nginx默认web端口
- 简化操作修改主机不需要的内容

##  20240603(v1.1.7) 
- 修正腾讯云上Ubuntu 20.04 LTS 无法运行的问题
- 优化部分代码
  
##  20240506(v1.1.6) 
- 主机单独控制搜索引擎bot检测，xss，rce，scan，sql注入 
- 增加请求信息脱敏保存
- 修正CIDR判断问题

##  20240124(v1.1.5) 
- windows升级逻辑调整 
- linux 升级逻辑调整
- 加载配置调整

##  20240118(v1.1.3) 
- 核心数据每次重启进行自动备份
- 日志增加访客身份和header的筛选  
- 实时通讯数据进行加密处理
- 修正主机维护时候逻辑问题
- 提升主机运行状态健壮性

##  20240112(v1.1.2) 
- 减小Linux文件大小
- 增加搜索爬虫的检验  
- 白名单IP和黑名单IP 支持IP网段类型
- 日志时间可排序
- 日志增加耗时记录
 
##  20231230(v1.1.1)
本次版本更新较大
- 重构初始化配置信息
- 重构日期和封装信息
- 首页信息异常信息提示进行轮播处理
- 新增通讯加密
- 增加在线文档
- 增加各主要界面查询
- 提升日志插入效率
- 新增运行状态信息
- 新增日志100W归档
 
##  20231128(v1.0.128) 

- 本地信息进行加密处理
- 修正从详情返回列表日期丢失的问题
- 默认删除180天以前的数据
- 完成国家Country的词云
- 增加世界地图
- 新增主机增加导入和导出功能
- 攻击日志里面点击详情返回时候保持原有的页码和搜索条件
- 增加扫描工具识别

##  20230911(v1.0.116) 

- 新版本支持远程升级
- 修正websocket重连机制


##  20230830(v1.0.113) 

- 重构waf引擎加载过程
- 修正主机修改及时生效 
- 攻击日志增加响应编码的查询
- 改进配置数据的提取方式和备注
- 修正写入日志的时候乱码问题

##  20230828(v1.0.111) 

- 优化和处理resp内容

##  202308271(v1.0.108) 
 
- 新增添加编辑主机时候检测端口可用性
- 新增全局网站配置
- 配置项的动态处理
- 修正规则没有实时更新问题

##  20230825(v1.0.106) 
 
- 增加日志直接添加规则的连带操作
- 增加优化日志列表
- 增加日志快速增加黑名单IP
- 增加响应编码
- 增加删除的天数，从数据库提取

##  20230824(v1.0.105) 
 
- 增加通知频率控制
- 增加自定义Cache
- 修正规则或的情况
- （实验）系统防火墙：linux和windows分离
- 重新整理城市信息汇总
- 
##  20230728(v1.0.103) 
 
- 解决之前无法屏蔽掉特定url日志的问题

##  20230711(v1.0.102) 
 
- 增加新打包编译方式
- 增加如果是特定url记录包含情况
- 增加判断静态资源

##  20230619(v1.0.101) 
 
- 自动启动服务形式，避免服务挂了，无法启动
- 修正删除历史日志的问题
- 新增系统配置
- 重新规划消息通知模板

##  20230601(v1.0.100) 

- 记录最大body的长度，改成全局的
- 
##  20230530(v1.0.100) 

- 修正间隔时间导致cpu和内存长期占用，系统被kill的问题
- 新增内存异常排查

##  20230525(v1.0.99) 

- 优化攻击日志的显示
- 其他地方优化
- 修正规则检测是否存在代码和调整逻辑
- 升级前端框架版本
- 升级数据库ORM版本

##  20230524(v1.0.98) 
- 修正提示错误没有及时return导致 后续还能正常使用的情况
- 修正队列数据可能是为空 导致保存异常

##  20230403(v1.0.97) 
- 修正多项问题
- 增加websocket实时通讯
- 删除主机时候，顺便删掉所有的关联保护信息

##  20230330(v1.0.96) 

- 将耗时信息转入队列
- 登录信息进行消息通知

##  20230329(v1.0.95) 

- 增加系统编译打包版本号
- 增加系统日志

##  20230210(v1.0.94) 

- 日志库独立

##  20230206(v1.0.93) 

- 增加url白名单前缀匹配等比较模式

##  20230204(v1.0.92) 

- 自定义服务器名称

##  20230203(v1.0.91) 

- 初始化账号信息为默认值
- 优化waf引擎
- 增加微信公众号通知推送
- 完善登录和鉴权

##  20230202(v1.0.90) 

- 登录部分的处理
- 增加账号管理和日志的基本内容

##  20221226(v1.0.89) 

- 增加跨站检测
- 增加sql注入检测

##  20221211(v1.0.88) 

- 增加linux相关配置
- 修复host80时候不带端口导致异常问题

##  20221209(v1.0.87) 

- 增加日志查询
- 升级前端版本 

##  20221203(v1.0.86) 

- 增加Windows下文件压缩
- 增加规则访问变量值

##  20221202(v1.0.85) 

- 增加时间区域支持
- 修正主机删除提示错误的问题
- 增加首页看盘IP相关IP情况处理
- 增加首页看盘统计区间数据的处理

##  20221201(v1.0.84) 

- 优化处理消息逻辑
- 修复删除问题
- 增加黑名单IP、限制URL
- 前端增加主机的选择
- 增加ip、url白名单
- 增加url隐私保护
- 增加anticc
- waf引擎升级

##  20221122(v1.0.83) 

- 隐私保护增加：包含、开始、结尾、完全匹配
- 优化waf引擎处理结构
- 增加CC引擎防御保护

##  20221119(v1.0.82) 

- 增加隐私保护url
- 修正url ip新建时候没有置空的bug
- 增加url白名单控制

##  20221111(v1.0.81)

- 增加全局租户处理

##  20221104(v1.0.80)

- 调整目录结构并增加参数

##  20221102(v1.0.79)  
  
- 调整前端增加面包屑
- 整体代码调整	

##  20221101(v1.0.78)  
  
- 整体业务接口重新梳理封装

##  20221031(v1.0.77)  
  
- 增加日志库时间索引

##  20221028(v1.0.76)  
  
- 增加部分脱敏处理，待完善脱敏管理部分
- 增加数据统计累计到天

##  20221027(v1.0.75)  
  
- 增加数据统计部分代码 
- 增加定时器
- 增加前端看板内容处理

##  20221027(v1.0.75)  
  
- 增加数据统计部分代码 
	
##  20221026(v1.0.74)  
  
- 日志倒排
- 重新编译前端

##  20221025(v1.0.73)  
  
- 增加linux版本
- 增加ip限制频率
- 修正无法打包的问题
- 增加手工编写规则的方式
- 增加重启功能 

 
