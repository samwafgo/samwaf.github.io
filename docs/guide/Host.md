# 网站配置
  
## 1 部署架构：
请依据下面的架构方式布局SamWaf防火墙

### 1.1 部署在同台服务器（常见）
::: important
重要:部署在同台服务器会存在端口：80、443已经占用得情况 ，请在本机或者网站业务不繁忙得时候操作。[修改查看常见问题](./Question.md#_1-端口80-被占用情况)  

:::


```mermaid
---
title: 部署在同一台服务器
---
flowchart TB
    A[客户浏览器]
	B(SamWaf)
	C(Web服务器)
	A --> B  
	B --> A
	subgraph 服务器1
    B --> C
    C --> B
    end
  
```


### 1.2 部署在不同服务器
此部署方式适合服务器资源丰富将SamWaf单独部署，域名解析到SamWaf所在服务器即可。
后面接入各各网站服务器，只暴露SamWaf所在服务器

```mermaid
---
title: 部署在不同服务器
---
flowchart TB
    A[客户浏览器]
	B(SamWaf)
	C(Web服务器)
	A --> B  
	subgraph 服务器1
    B 
    end  
	B --> C
	subgraph 服务器2 
    C
    end
	C --> B
	B --> A 
  
```
## 2 新增可被防火墙保护的网站：
![新增一个受到SamWaf防火墙保护的网站](/images/add_host.png)
配置一次即可随时使用。

1. 网站：
    - 正常填写网站域名即可,注意 https，http前缀,/ 等后缀都不要加
	
	例如：www.baidu.com，pan.baidu.com
	
2. 端口：
    - 输入需要防护的网站端口 
	http是80 https 是 443 （如果已经安装了宝塔，Nginx，IIS等 需要手工改动端口成非80，或者非443端口）[修改查看常见问题](./Question.md#_1-端口80-被占用情况) 
3. 加密证书：
    - 如果是https需要选择加密证书，80端口不需要
	- 密钥串
	```
	通常文件名：*.key 内容格式如下：-----BEGIN RSA PRIVATE KEY----- ... 全选复制填写进来
	```
	- 证书串
	```
	通常文件名：*.crt 内容格式如下：-----BEGIN CERTIFICATE----- ... 全选复制填写进来
	```
	
4. 后端系统类型、后端应用类型：
    -  非必要，可以选择和实际一样，也可以保持默认（后期可能针对后端接入不同做适配处理）
5. 后端域名：
    - 后端域名通常同第一项网站域名相同
6. 后端IP：
    - 如SamWaf同网站在同一台服务器 填写127.0.0.1 如果是不同服务器请填写实际IP	
7. 后端端口：
    - 情况1，在SamWaf和网站在同一台服务器，那么端口需要写成81等其他端口  情况2：如果不在同一台服务器，那么此处可以原来端口 
	
	 